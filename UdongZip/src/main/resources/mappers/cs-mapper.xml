<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="csMapper">

	<resultMap type="notice" id="noticeResultSet">
		<result column="NOTICE_NO" property="noticeNo" />
		<result column="TITLE" property="title" />
		<result column="CREATE_DATE" property="createDate" />
		<result column="STATUS" property="status" />
		<result column="CONTENT" property="content" />
	</resultMap>
	
	<resultMap type="faq" id="faqResultSet">
		<result column="FAQ_NO" property="faqNo" />
		<result column="TITLE" property="title" />
		<result column="STATUS" property="status" />
		<result column="CONTENT" property="content" />
	</resultMap>
	
	<resultMap type="inquiry" id="inquiryResultSet">
		<result column="INQUIRY_NO" property="inquiryNo" />
		<result column="MEMBER_NO" property="memberNo" />
		<result column="AGENT_NO" property="agentNo" />
		<result column="CATEGORY" property="category" />
		<result column="TITLE" property="title" />
		<result column="CONTENT" property="content" />
		<result column="CREATE_DATE" property="createDate" />
		<result column="ANSWER_CONTENT" property="answerContent" />
		<result column="ANSWER_DATE" property="answerDate" />
		<result column="STATUS" property="status" />
	</resultMap>

	<!-- 관리자, 사용자 : 공지사항 리스트 전체 조회 -->
	<select id="selectNoticeList" resultMap="noticeResultSet">
		SELECT NOTICE_NO, TITLE,
		       TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') "CREATE_DATE", STATUS
		FROM NOTICE
		WHERE STATUS = 'Y'
		ORDER BY CREATE_DATE DESC, NOTICE_NO DESC
	</select>
	
	<!-- 사용자 : FAQ 리스트 전체 조회 -->
	<select id="selectFaqList" resultMap="faqResultSet">
		SELECT TITLE, CONTENT
		FROM FAQ
	</select>
	
	<!-- 사용자 : 공지사항 리스트 상세 조회 -->
	<select id="selectNotice" parameterType="_int" resultMap="noticeResultSet">
		SELECT NOTICE_NO, TITLE,
		       TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') "CREATE_DATE", CONTENT
		FROM NOTICE
		WHERE NOTICE_NO = #{noticeNo}
		AND STATUS = 'Y'
	</select>
	
	<!-- 관리자 : 공지사항 리스트 작성 -->
	<insert id="insertNotice" parameterType="notice">
		INSERT INTO NOTICE
				     VALUES (SEQ_NOT.NEXTVAL,
				             #{title},
				             #{content},
				             SYSDATE,
				             DEFAULT)
	</insert>
	
	<!-- 업체 회원 : 내가 쓴 1:1문의 내역 조회 -->
	<select id="selectAgentInquiryList" parameterType="_int" resultMap="inquiryResultSet">
		SELECT *
		  FROM INQUIRY
		 WHERE AGENT_NO = #{agentNo}
		   AND STATUS = 'Y'
		 ORDER BY INQUIRY_NO DESC
	</select>
	
	<!-- 개인/업체 공용 : 1:1 문의 상세 조회 -->
	<select id="selectInquiry" parameterType="_int" resultMap="inquiryResultSet">
		SELECT *
		  FROM INQUIRY
		 WHERE INQUIRY_NO = #{inquiryNo}
		   AND STATUS = 'Y'
	</select>
	
	<!-- 개인/업체 공용 : 1:1 문의 삭제 -->
	<update id="deleteInquiry" parameterType="_int">
		UPDATE INQUIRY
		   SET STATUS = 'N'
		 WHERE INQUIRY_NO = #{inquiryNo}
	</update>
	

</mapper>